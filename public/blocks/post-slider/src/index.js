/**
 * Registers a new block provided a unique name and an object defining its behavior.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */
import { registerBlockType } from '@wordpress/blocks';

/**
 * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.
 * All files containing `style` keyword are bundled together. The code used
 * gets applied both to the front of your site and to the editor.
 *
 * @see https://www.npmjs.com/package/@wordpress/scripts#using-css
 */
import './style.scss';

/**
 * Internal dependencies
 */
import Edit from './edit';
import save from './save';
import metadata from './block.json';

/**
 * Every block starts by registering a new block type definition.
 *
 * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/
 */

const boldpoIcon = (
	<svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
		<path d="M39.8587 24.5399C38.928 24.5399 38.0181 24.8159 37.2442 25.333C36.4704 25.8501 35.8672 26.585 35.511 27.4449C35.1549 28.3048 35.0617 29.251 35.2433 30.1638C35.4248 31.0767 35.873 31.9152 36.5311 32.5733C37.1893 33.2314 38.0278 33.6796 38.9406 33.8612C39.8535 34.0428 40.7996 33.9496 41.6595 33.5934C42.5194 33.2372 43.2544 32.6341 43.7714 31.8602C44.2885 31.0863 44.5645 30.1765 44.5645 29.2458C44.5645 27.9977 44.0687 26.8007 43.1862 25.9182C42.3037 25.0357 41.1067 24.5399 39.8587 24.5399Z" fill="#A216FF" />
		<path d="M82.9411 21.7635H78.0235C77.5156 19.1197 76.104 16.7348 74.0306 15.0177C71.9571 13.3006 69.351 12.3581 66.6589 12.3518H33.3415C30.6493 12.3581 28.0432 13.3006 25.9698 15.0177C23.8963 16.7348 22.4847 19.1197 21.9769 21.7635H17.0593C15.1872 21.7635 13.3917 22.5072 12.068 23.831C10.7442 25.1547 10.0005 26.9502 10.0005 28.8223V52.3515C10.0005 54.2236 10.7442 56.019 12.068 57.3428C13.3917 58.6666 15.1872 59.4102 17.0593 59.4102H21.7651V60.2338C21.762 61.3625 21.982 62.4806 22.4125 63.524C22.843 64.5674 23.4755 65.5153 24.2736 66.3134C25.0717 67.1115 26.0197 67.744 27.063 68.1745C28.1064 68.605 29.2246 68.825 30.3533 68.8219H69.6471C70.7757 68.825 71.8939 68.605 72.9373 68.1745C73.9807 67.744 74.9286 67.1115 75.7267 66.3134C76.5248 65.5153 77.1573 64.5674 77.5878 63.524C78.0183 62.4806 78.2383 61.3625 78.2352 60.2338V59.4102H82.9411C84.8132 59.4102 86.6086 58.6666 87.9324 57.3428C89.2562 56.019 89.9998 54.2236 89.9998 52.3515V28.8223C89.9998 26.9502 89.2562 25.1547 87.9324 23.831C86.6086 22.5072 84.8132 21.7635 82.9411 21.7635ZM14.7063 52.3515V28.8223C14.7063 28.1982 14.9542 27.5998 15.3955 27.1585C15.8367 26.7172 16.4352 26.4693 17.0593 26.4693H21.7651V54.7044H17.0593C16.4352 54.7044 15.8367 54.4565 15.3955 54.0152C14.9542 53.574 14.7063 52.9755 14.7063 52.3515ZM69.7412 36.234C68.5942 35.2946 67.175 34.7501 65.6942 34.681H63.153C61.9699 34.6038 60.7852 34.8053 59.6942 35.2693C58.6585 35.7494 57.7117 36.4018 56.8942 37.1987L52.3531 41.528L50.2355 43.6692L48.3766 45.4809L48.1884 45.6692C47.9601 45.8677 47.6674 45.9764 47.3649 45.9751C47.0426 45.9669 46.7305 45.8602 46.4708 45.6692L46.2825 45.4809L44.1414 43.3398C42.9618 42.1787 41.373 41.528 39.7179 41.528C38.077 41.5302 36.5037 42.1816 35.3415 43.3398L26.4709 52.3515V23.9282C26.4709 22.106 27.1948 20.3585 28.4833 19.07C29.7718 17.7815 31.5193 17.0577 33.3415 17.0577H66.6589C68.481 17.0577 70.2286 17.7815 71.5171 19.07C72.8055 20.3585 73.5294 22.106 73.5294 23.9282V39.9281L70.0706 36.4928L69.7412 36.234ZM85.294 52.3515C85.294 52.9755 85.0461 53.574 84.6048 54.0152C84.1636 54.4565 83.5651 54.7044 82.9411 54.7044H78.2352V26.4693H82.9411C83.5651 26.4693 84.1636 26.7172 84.6048 27.1585C85.0461 27.5998 85.294 28.1982 85.294 28.8223V52.3515Z" fill="#A216FF" />
		<path d="M49.9999 82.9394C51.2994 82.9394 52.3528 81.886 52.3528 80.5865C52.3528 79.287 51.2994 78.2336 49.9999 78.2336C48.7004 78.2336 47.647 79.287 47.647 80.5865C47.647 81.886 48.7004 82.9394 49.9999 82.9394Z" fill="#A216FF" />
		<path d="M38.2352 82.9394C39.5347 82.9394 40.5882 81.886 40.5882 80.5865C40.5882 79.287 39.5347 78.2336 38.2352 78.2336C36.9358 78.2336 35.8823 79.287 35.8823 80.5865C35.8823 81.886 36.9358 82.9394 38.2352 82.9394Z" fill="#A216FF" />
		<path d="M61.7645 82.9394C63.064 82.9394 64.1175 81.886 64.1175 80.5865C64.1175 79.287 63.064 78.2336 61.7645 78.2336C60.4651 78.2336 59.4116 79.287 59.4116 80.5865C59.4116 81.886 60.4651 82.9394 61.7645 82.9394Z" fill="#A216FF" />
		<path d="M27.4829 80.5865L30.4005 77.5277C30.8388 77.0869 31.0847 76.4905 31.0847 75.8689C31.0847 75.2473 30.8388 74.6509 30.4005 74.2101C30.1818 73.9896 29.9216 73.8145 29.6348 73.6951C29.3481 73.5756 29.0406 73.5141 28.7299 73.5141C28.4193 73.5141 28.1118 73.5756 27.8251 73.6951C27.5383 73.8145 27.2781 73.9896 27.0594 74.2101L22.5888 78.9159C22.1717 79.3535 21.939 79.9349 21.939 80.5394C21.939 81.144 22.1717 81.7254 22.5888 82.163L27.0829 86.8688C27.3029 87.1126 27.5714 87.3076 27.8713 87.4413C28.1712 87.575 28.4957 87.6445 28.8241 87.6453C29.2839 87.6435 29.7331 87.5071 30.1162 87.2528C30.4993 86.9986 30.7996 86.6376 30.9798 86.2146C31.16 85.7916 31.2123 85.325 31.1303 84.8726C31.0482 84.4201 30.8354 84.0017 30.5182 83.6688L27.4829 80.5865Z" fill="#A216FF" />
		<path d="M73.0121 74.2571C72.7933 74.0366 72.5331 73.8616 72.2464 73.7421C71.9597 73.6227 71.6521 73.5612 71.3415 73.5612C71.0309 73.5612 70.7234 73.6227 70.4366 73.7421C70.1499 73.8616 69.8897 74.0366 69.6709 74.2571C69.2327 74.698 68.9867 75.2943 68.9867 75.916C68.9867 76.5376 69.2327 77.1339 69.6709 77.5748L72.518 80.5865L69.5768 83.6924C69.1462 84.1448 68.913 84.7497 68.9285 85.3741C68.9439 85.9985 69.2067 86.5912 69.6592 87.0218C70.1116 87.4523 70.7165 87.6856 71.3409 87.6701C71.9653 87.6547 72.558 87.3918 72.9886 86.9394L77.4826 82.2336C77.8998 81.796 78.1325 81.2146 78.1325 80.61C78.1325 80.0055 77.8998 79.4241 77.4826 78.9865L73.0121 74.2571Z" fill="#A216FF" />
	</svg>

);

registerBlockType(metadata.name, {
	icon: boldpoIcon,
	/**
	 * @see ./edit.js
	 */
	edit: Edit,

	/**
	 * @see ./save.js
	 */
	save,
});


// Import shared slider
import domReady from '@wordpress/dom-ready';
import './slider-init.js';

domReady(() => {
	const observer = new MutationObserver(() => {
		jQuery(document).trigger('boldpoInitSliders');
	});

	observer.observe(document.body, {
		childList: true,
		subtree: true,
	});

	jQuery(document).on('boldpoInitSliders', () => {
		if (typeof window.initBoldpoSlider === 'function') {
			window.initBoldpoSlider(document);
		}
	});
});

